<!DOCTYPE html>
<html>
<!-- 
    Copyright Â© 2019 Dot Inc.
    This page is used to overwrite an insecure SSL page.
-->
    <head>
        <title> </title>
        <style>

            @font-face {
                font-family: "SF Mono";
                font-weight: 400;
                src: url("https://sf.abarba.me/SFMono-Regular.otf");
            }

            #app {
                padding: 80px 200px 200px 200px;
                font-family: Roboto;
                line-height: 15px;
            }

            .subtitle {
                font-weight: 300;
                color: #616161;
                margin: 0px 0px 12px 0px;
            }

            .subtitle strong {
                font-weight: 500;
            }

            code {
                color: #0000004f;
                font-weight: 700;
                font-size: 16px;
                margin-left: 20px;
            }

            svg[data-is-warning="true"] {
                fill: rgb(255, 100, 100);
                margin-left: -15px;
            }

            .button {
                border-radius: 50px;
                padding: 10px 20px 10px 20px;
                transition: 0.4s background-color, border cubic-bezier(0.19, 1, 0.22, 1);
                user-select: none;
                border: 2px #0000000a solid;
                margin-right: 15px;
            }

            .button:hover {
                background-color: #e0e0e0;
                cursor: pointer;
                border: 2px #e0e0e000 solid
            }

            .actions {
                margin: 70px 0px 25px 0px;
                user-select: none;
            }

            p {
                line-height: 21px;
                color: #545454;
                margin-left: 20px;
                width: 750px;
            }

            .advanced {
                user-select: none;
                opacity: 0; 
                transition: 0.1s all;
            }

            #reload {
                cursor: pointer;
                font-weight: 600;
                border-bottom: 1px gray solid;
            }

            #proceed {
                cursor: pointer;
                font-weight: 400;
                color: #80808038;
                border-bottom: 1px #80808038 solid;
                margin-left: 20px;
            }
        </style>
    </head>
    <body>
        <div id="app">
            <svg data-is-warning="true" xmlns="http://www.w3.org/2000/svg" width="140" height="140" viewBox="0 0 24 24">
                <path d="M4.47 21h15.06c1.54 0 2.5-1.67 1.73-3L13.73 4.99c-.77-1.33-2.69-1.33-3.46 0L2.74 18c-.77 1.33.19 3 1.73 3zM12 14c-.55 0-1-.45-1-1v-2c0-.55.45-1 1-1s1 .45 1 1v2c0 .55-.45 1-1 1zm1 4h-2v-2h2v2z"/>
            </svg>

            <h1 class="title">Your connection is not private</h1>
            <h3 class="subtitle">Attackers can steal your private information from <strong id="attacker-url"></strong></h3>

            <div class="actions">
                <a class="button">Advanced</a>
                <a class="button">Back to safety</a>
            </div>

            <div class="advanced">
                <p>The server could not prove that it is <strong id="attack-url"></strong>. This could be caused by a misconfiguration or an attacker intercepting your connection. Your computer's clock is currently set to <strong id="date"></strong>. Does this look correct to you? If not, change your computer's clock and <a id="reload">click here</a>.</p>
                <br><br>
                <code></code>
                <br><br>
                <a id="proceed"></a>
            </div>
        </div>
        <script>

                function subdomain(url) {
                    url = url.replace(new RegExp(/^\s+/),"");
                    url = url.replace(new RegExp(/\s+$/),"");
                    url = url.replace(new RegExp(/\\/g),"/");
                    url = url.replace(new RegExp(/^www\./i),"");
                    url = url.replace(new RegExp(/\/(.*)/),"");
                    if (url.match(new RegExp(/\.[a-z]{2,3}\.[a-z]{2}$/i))) {
                        url = url.replace(new RegExp(/\.[a-z]{2,3}\.[a-z]{2}$/i),"");
                    } else if (url.match(new RegExp(/\.[a-z]{2,4}$/i))) {
                        url = url.replace(new RegExp(/\.[a-z]{2,4}$/i),"");
                    }
                    var subDomain = (url.match(new RegExp(/\./g))) ? true : false;
                    return(subDomain);
                }

                var error = {};
                error.url = new URL(window.location.href).searchParams.get("du");
                error.hostname = new URL(error.url).hostname;
                error.host = new URL(error.url).hostname.substring(new URL(error.url).hostname.lastIndexOf(".", new URL(error.url).hostname.lastIndexOf(".") - 1) + 1);;
                error.code = new URL(window.location.href).searchParams.get("err")
    
                document.title = error.hostname;

                document.getElementById("attacker-url").innerHTML = error.hostname
                document.getElementById("attack-url").innerHTML = error.hostname
                document.getElementById("proceed").innerHTML = `Proceed to ${error.hostname} (unsafe)`
                document.getElementById("date").innerHTML = new Date().toString().split(' ' + new Date().getHours())[0]
                document.getElementsByTagName("code")[0].innerHTML = error.code;
                
                document.getElementsByTagName("a")[0].addEventListener("click", function() {
                    if(document.getElementsByClassName("advanced")[0].style.opacity == 1) {
                        document.getElementsByClassName("advanced")[0].style.opacity = 0;
                    }
                    else {
                        document.getElementsByClassName("advanced")[0].style.opacity = 1;
                    }
                })

                document.getElementsByTagName("a")[1].addEventListener("click", function() {
                    if(subdomain(error.hostname) == true) {
                        window.location.replace(`https://${error.host}`)  
                    }
                    else {
                        window.history.back()
                    }
                })

                document.getElementsByTagName("a")[2].addEventListener("click", function() {
                    window.location.replace(error.url)
                })
        </script>
    </body>
</html>
